---
title: ColorThiefçš„ä»‹ç»ä¸ä½¿ç”¨
date: 2024-09-09 16:14:49
permalink: /pages/176fa6/
categories:
  - å‰ç«¯
  - JavaScriptæ–‡ç« 
tags:
  -
author:
  name: ä¸œæµ
  link: https://github.com/Jinuss
---

## æ¦‚è¿°

`colorThief`æ˜¯ä¸€ä¸ª Javascript æ’ä»¶ï¼Œæ”¯æŒåœ¨æµè§ˆå™¨ç«¯æˆ– Node ç¯å¢ƒä¸­ä½¿ç”¨ã€‚`Thief`çš„ä¸­æ–‡æ„æ€æ˜¯å·çªƒã€å°å·ã€‚`colorThief`çš„ä½œç”¨å°±æ˜¯é€šè¿‡ç®—æ³•å»è·å–å›¾ç‰‡çš„è‰²æºã€‚

## API ä»‹ç»ä¸ç¤ºä¾‹

`colorThief`æä¾›ä¸¤ä¸ªæ–¹æ³•ï¼Œ`getColor`å’Œ`getPalette`ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•åœ¨ Node ç¯å¢ƒä¸­éƒ½æ˜¯è¿”å›`Promise`ã€‚

### `getColor`æ–¹æ³•

`getColor`æ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°`img`å’Œ`quality`ã€‚

- `img`ï¼šå›¾åƒæºï¼Œåœ¨æµè§ˆå™¨ç¯å¢ƒä¸­ `img` éœ€è¦ä¼  `HTML` å…ƒç´ èŠ‚ç‚¹ï¼Œè€Œåœ¨ Node ä¸­,`img`æ˜¯å›¾åƒè·¯å¾„

- `quality`ï¼šå¯é€‰å‚æ•°ï¼Œæ•°å€¼ç±»å‹ï¼Œ1 æˆ–è€…æ›´å¤§çš„æ•°å­—ã€‚é»˜è®¤æ˜¯ 10ï¼Œå†³å®šé‡‡æ ·æ—¶è·³è¿‡å¤šå°‘åƒç´ ã€‚å€¼è¶Šå¤§ï¼Œè¿”å›é€Ÿåº¦è¶Šå¿«ã€‚

- æ•ˆæœ
  <img src="../../Demo/image/getColor.png"/>
- ç¤ºä¾‹

```js
doms.imgList.forEach((img) => {
  img.addEventListener("click", async (e) => {
    console.log("ğŸš€ ~ img1.addEventListener ~ e:", e.target);

    const p = await colorThief.getPalette(e.target, 3);

    console.log("ğŸš€ ~ doms.img1.addEventListener ~ p:", p);
    let colorArr = [];
    p.forEach((item, index) => {
      const [r, g, b] = item;
      colorArr[index] = `rgb(${r},${g},${b})`;
    });
    colorArr.forEach((color, i) => {
      document.documentElement.style.setProperty(`--color${i + 1}`, color);
    });
  });
});
```

### `getPalette`æ–¹æ³•

`getPalette`æ–¹æ³•ä¹Ÿæ˜¯æ¥å— 3 ä¸ªå‚æ•°ï¼Œé€šè¿‡èšç±»ç›¸ä¼¼é¢œè‰²ä»å›¾åƒä¸­è·å–è°ƒè‰²æ¿ã€‚è¿”å›å€¼ä¸ºä¸€ä¸ªæ•°ç»„ã€‚å®ƒæ¯”`getColor`æ–¹æ³•å¤šäº†ç¬¬äºŒä¸ªå‚æ•°ï¼Œå…¶ç¬¬äºŒä¸ªå‚æ•°æ˜¯è¿”å›å¤šå°‘ä¸ªé¢œè‰²

- æ•ˆæœ
  <img src="../../Demo/image/getPalette.png"/>
- ç¤ºä¾‹

  ```js
  const p = await colorThief.getColor(doms.img);
  console.log("ğŸš€ ~ initExample2 ~ p:", p);
  doms.colorSpan[0].style.setProperty(
    "--color",
    `rgb(${p[0]},${p[1]},${p[2]})`
  );

  const count = doms.colorSpan.length;
  const q = await colorThief.getPalette(doms.img, count);

  q.forEach((item, index) => {
    const [r, g, b] = item;
    doms.colorSpan[index + 1].style.setProperty(
      "--color",
      `rgb(${r},${g},${b})`
    );
  });
  ```

### å‚è€ƒåœ°å€

 - [`ColorThiefå®˜ç½‘`](https://lokeshdhakar.com/projects/color-thief/)
 - [æ–‡ç« ç¤ºä¾‹](https://github.com/Jinuss/blog/blob/main/docs/Demo/20.colorThief.html)