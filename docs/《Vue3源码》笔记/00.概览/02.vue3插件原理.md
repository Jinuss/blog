---
title: vue3æ’ä»¶åŸç†
date: 2024-08-26 16:56:48
permalink: /pages/89a38s9/
categories:
  - ã€ŠVue3æºç ã€‹ç¬”è®°
  - æ¦‚è§ˆ
tags:
  -
author:
  name: ä¸œæµ
  link: https://github.com/Jinuss
---

## æ¦‚è§ˆ

`vue3`çš„ç”Ÿæ€åœˆæä¾›äº†è®¸å¤šæ–¹ä¾¿çš„æ’ä»¶æˆ–è€…å·¥å…·ï¼Œæ¯”å¦‚`pinia`ã€`vue-router`å’Œ`Element Plus`ç­‰å¾…ï¼Œä½¿ç”¨æ’ä»¶çš„å†™æ³•ä¸€èˆ¬å¦‚ä¸‹:

```js
const app = createApp(App);

app.use(pinia);
app.use(router);
app.use(ElementPlus, { locale }); // ç¬¬äºŒä¸ªå‚æ•°:{locale} ä¸ºä¼ ç»™æ’ä»¶çš„å‚æ•°
```

## æºç åˆ†æ

### `vue3`ä¸­`use`æ–¹æ³•çš„å®ç°

æ‰“å°`createApp`çš„è¿”å›å€¼`app`,å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œ

<img src="../../Demo/image/use.png" />

å…¶å®ç°å¦‚ä¸‹:

```js
        use(plugin, ...options) {
          if (installedPlugins.has(plugin)) {
            warn2(`Plugin has already been applied to target app.`);
          } else if (plugin && isFunction(plugin.install)) {
            installedPlugins.add(plugin);
            plugin.install(app, ...options);
          } else if (isFunction(plugin)) {
            installedPlugins.add(plugin);
            plugin(app, ...options);
          } else if (true) {
            warn2(
              `A plugin must either be a function or an object with an "install" function.`
            );
          }
          return app;
        },
```

å®ç°çš„æºç ä¸­,`installedPlugins`æ˜¯ä¸ª`WeakSet`ç±»å‹çš„å±€éƒ¨å˜é‡ï¼Œå…ˆæ˜¯åˆ¤æ–­æ’ä»¶`plugin`æ˜¯å¦è¢«å®‰è£…è¿‡ï¼Œæ’ä»¶åªéœ€è¦å®‰è£…ä¸€æ¬¡ï¼Œä¸èƒ½é‡å¤å®‰è£…ï¼›ç„¶ååˆ¤æ–­æ’ä»¶æ˜¯å¦å­˜åœ¨`install`æ–¹æ³•ï¼Œè‹¥å­˜åœ¨å°±è°ƒç”¨`plugin.add`æ–¹æ³•ï¼Œå¹¶å°†`console.log`æ‰“å°å‡ºæ¥çš„`app`å˜é‡çš„å€¼ä¼šä½œä¸ºå‚æ•°ä¼ ç»™`plugin`;è‹¥`plugin`ä¸å­˜åœ¨`install`æ–¹æ³•ï¼Œä¸”å…¶è‡ªèº«å°±æ˜¯ä¸ªå‡½æ•°ç±»å‹ï¼Œå°±è°ƒç”¨`plugin(app)`ï¼Œå¦åˆ™æŠ¥é”™;æœ€åè¿”å›`app`ã€‚

`vue3`ä¸­æ¥å—æ’ä»¶çš„å°±è¿™æ®µä»£ç ï¼Œå¯ä»¥è¯´ç†è§£èµ·æ¥éå¸¸ç®€å•ï¼ŒåŸºäºæ­¤ï¼Œå°±å¯ä»¥åœ¨æ’ä»¶`plugin`ä¸­æ‹¿åˆ°`app`è¿™ä¸ªå®ä¾‹å¯¹è±¡äº†ã€‚

### æ’ä»¶ä¸­çš„`install`

åœ¨[Pinia éƒ¨åˆ†æºç æµ…æ](!https://blog.csdn.net/m0_46281382/article/details/141384499?spm=1001.2014.3001.5502)ä¸€æ–‡ä¸­æœ‰æåˆ° `Pinia`ç›¸å…³çš„å®ç°

æˆ‘ä»¬å¯ä»¥è‡ªå·±å†™ä¸ª `Plugin` æµ‹è¯•ä¸‹,å…¶æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªåŒ…å«`install`å±æ€§æ–¹æ³•çš„ä¸€ä¸ªå¯¹è±¡è€Œå·²ã€‚

å¦‚ä¸‹ï¼š
```js
const plugin = {
  install: (app) => {
    console.log("ğŸš€ ~ app:", app);
  },
};
export default plugin;
```

æ‰“å°å‡ºæ¥å¦‚ä¸‹ï¼š
<img src="../../Demo/image/plugins.png" />