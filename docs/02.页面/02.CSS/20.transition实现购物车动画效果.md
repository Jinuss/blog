---
title: CSS3å®ç°è´­ç‰©è½¦åŠ¨ç”»æ•ˆæœ
date: 2024-08-28 14:40
permalink: /pages/bs2f71/
categories:
  - é¡µé¢
  - CSS
tags:
  -
author:
  name: ä¸œæµ
  link: https://github.com/Jinuss
---

### æ¦‚è¿°

å°ç¨‹åºå•†åŸæˆ–è€… web ç«¯ç½‘ç«™æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åªé€šè¿‡ CSS çš„ `animation` å’Œ`transform`ï¼Œè€Œä¸éœ€è¦å€ŸåŠ©é¢å¤–çš„ç¬¬ä¸‰æ–¹åº“è½»æ¾å®ç°ç®€å•çš„åŠ¨ç”»æ•ˆæœï¼Œä¸°å¯Œé¡µé¢çš„è¡¨è¾¾æ•ˆæœ

### æ•ˆæœ

å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œç‚¹å‡»æŒ‰é’®å°±ä¼šæœ‰ä¸ªå•†å“è¿›å…¥å·¦ä¸‹è§’çš„è´­ç‰©è½¦å†…

<img src="../../Demo/gif/buy.gif"/>

[è´­ç‰©è½¦åŠ¨ç”»ç¤ºä¾‹åœ°å€](https://codepen.io/jinuss/pen/poXZjVO)

### ä»£ç ç¤ºä¾‹

#### å…ƒç´ 

å¼€å§‹åªéœ€è¦å†™æŒ‰é’®å’Œè´­ç‰©è½¦ä¸¤ä¸ª `DOM` èŠ‚ç‚¹

```html
<button id="btn">add</button>
<span class="bulk">
  <svg
    t="1724755384446"
    class="icon"
    viewBox="0 0 1028 1024"
    version="1.1"
    xmlns="http://www.w3.org/2000/svg"
    p-id="4635"
    width="20"
    height="20"
  >
    <path
      d="M332.8 790.528q19.456 0 36.864 7.168t30.208 19.968 20.48 30.208 7.68 36.864-7.68 36.864-20.48 30.208-30.208 20.48-36.864 7.68q-20.48 0-37.888-7.68t-30.208-20.48-20.48-30.208-7.68-36.864 7.68-36.864 20.48-30.208 30.208-19.968 37.888-7.168zM758.784 792.576q19.456 0 37.376 7.168t30.72 19.968 20.48 30.208 7.68 36.864-7.68 36.864-20.48 30.208-30.72 20.48-37.376 7.68-36.864-7.68-30.208-20.48-20.48-30.208-7.68-36.864 7.68-36.864 20.48-30.208 30.208-19.968 36.864-7.168zM930.816 210.944q28.672 0 44.544 7.68t22.528 18.944 6.144 24.064-3.584 22.016-13.312 37.888-22.016 62.976-23.552 68.096-18.944 53.248q-13.312 40.96-33.28 56.832t-49.664 15.872l-35.84 0-65.536 0-86.016 0-96.256 0-253.952 0 14.336 92.16 517.12 0q49.152 0 49.152 41.984 0 20.48-9.728 35.84t-38.4 14.336l-49.152 0-94.208 0-118.784 0-119.808 0-99.328 0-55.296 0q-20.48 0-34.304-9.216t-23.04-24.064-14.848-32.256-8.704-32.768q-1.024-6.144-5.632-29.696t-11.264-58.88-14.848-78.848-16.384-87.552q-19.456-103.424-44.032-230.4l-76.8 0q-15.36 0-25.6-7.68t-16.896-18.432-9.216-23.04-2.56-22.528q0-20.48 13.824-33.792t37.376-12.288l103.424 0q20.48 0 32.768 6.144t19.456 15.36 10.24 18.944 5.12 16.896q2.048 8.192 4.096 23.04t4.096 30.208q3.072 18.432 6.144 38.912l700.416 0zM892.928 302.08l-641.024-2.048 35.84 185.344 535.552 1.024z"
      p-id="4636"
      fill="#ffffff"
    ></path>
  </svg>
</span>
```

#### å®šä¹‰åŠ¨ç”»

å®šä¹‰ä¸¤ä¸ªåŠ¨ç”»ï¼Œå‚ç›´æ–¹å‘`moveY`å’Œæ°´å¹³æ–¹å‘`moveX`; `moveX`åº”ç”¨å›¾æ ‡`<i></i>`ï¼Œè€Œ`moveY`åº”ç”¨äºçˆ¶å…ƒç´ ï¼Œæˆ‘ä»¬è‚‰çœ¼çœ‹åˆ°çš„æ˜¯ä¸¤ä¸ªåŠ¨ç”»çš„ç»¼åˆæ•ˆæœå°±å¤åˆåŠ¨ç”»ã€‚

```css
span.add {
  margin-left: var(--left);
  margin-top: var(--top);
  display: inline-block;
  width: 20px;
  height: 20px;
  position: absolute;
  animation: moveY 1s cubic-bezier(0.5, -0.5, 1, 1); /*è´å¡å°”å‡½æ•°*/
}

span.add i {
  display: inline-block;
  background-color: #438de8;
  width: 20px;
  height: 20px;
  font-size: 16px;
  border-radius: 50%;
  animation: moveX 1s linear;
}

span.bulk {
  display: inline-block;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-content: center;
  align-items: center;
  width: 40px;
  height: 40px;
  background-color: #438de8;
  margin-top: 400px;
  margin-left: 50px;
}

@keyframes moveY {
  to {
    transform: translateY(var(--y));
  }
}

@keyframes moveX {
  to {
    transform: translateX(var(--x));
  }
}
```

å¦å¤–ä¸Šé¢ä¸­çš„`css`è¿˜ç”¨åˆ°äº†è‡ªå®šä¹‰å˜é‡`--x`,`--y`ä»¥åŠ`--top`å’Œ`--left`,è¿™æ ·å°±å¯ä»¥ç”¨ Javascript åŠ¨æ€åœ°å»èµ‹å€¼ä¿®æ”¹ï¼Œæä¾›æ›´å¤šåœ°å¯èƒ½æ€§

### Javascript ä»£ç 

åŠ¨ç”»çš„è¿åŠ¨ä¸€å®šæ˜¯ç›¸å¯¹çš„ï¼Œæ—¢ç„¶æåˆ°ç›¸å¯¹ï¼Œå°±ä¸€å®šé¿ä¸å¼€åˆå§‹ä½ç½®å’Œç›®æ ‡ä½ç½®ï¼Œåœ¨[ä¸€å¼ å›¾ç†è§£æµè§ˆå™¨çš„ä½ç½®å’Œå°ºå¯¸](https://blog.csdn.net/m0_46281382/article/details/141352167)ä¸€æ–‡ä¸­è®²åˆ°å…ƒç´ ç›¸å¯¹æ–‡æ¡£çš„ä½ç½®ã€‚

è¿™æ®µä»£ç çš„æ ¸å¿ƒåˆ†ä¸ºä¸‰æ­¥ï¼š

1.è·å–æ§åˆ¶æŒ‰é’®å’Œè´­ç‰©è½¦çš„ä½ç½®ï¼Œè®¡ç®—å‡ºå°çƒçš„ç”Ÿæˆä½ç½®å’Œå°çƒåŠ¨ç”»çš„åç§»é‡

2.åŠ¨æ€åˆ›å»ºå°çƒï¼Œè®¾ç½®å…¶å±æ€§åˆå§‹ä½ç½®ï¼š`--top`,`--left`ä»¥åŠåç§»ä½ç½®ï¼š`--x`,`--y`

3.ç›‘å¬åŠ¨ç”»ï¼Œå°çƒåŠ¨ç”»ç»“æŸæ—¶å°±ç§»é™¤

```js
const doms = {
  btn: document.querySelector("#btn"),
  bulk: document.querySelector(".bulk"),
};
const w = (h = 10);

doms.btn.onclick = () => {
  const posBtn = doms.btn.getBoundingClientRect();
  console.log("ğŸš€ ~ posBtn:", posBtn);
  let spanPosition = {
    left: posBtn.left + posBtn.width / 2 - w,
    top: posBtn.top - posBtn.height / 2 + h,
  };

  const target = doms.bulk.getBoundingClientRect();
  spanPosition.targetX = -(spanPosition.left - target.left - target.width / 2);
  spanPosition.targetY = target.top - spanPosition.top - target.height / 2;
  let newSpan = document.createElement("span");
  newSpan.className = "add";
  newSpan.style.setProperty("--left", `${spanPosition.left}px`);
  newSpan.style.setProperty("--top", `${spanPosition.top}px`);
  newSpan.style.setProperty("--y", `${spanPosition.targetY}px`);
  newSpan.style.setProperty("--x", `${spanPosition.targetX}px`);
  newSpan.innerHTML = `<i>
                <svg t="1724757674752" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6405" width="20" height="20">
                    <path
                     d="M810.666667 490.666667v42.666666a21.333333 21.333333 0 0 1-21.333334 21.333334H554.666667v234.666666a21.333333 21.333333 0 0 1-21.333334 21.333334h-42.666666a21.333333 21.333333 0 0 1-21.333334-21.333334V554.666667H234.666667a21.333333 21.333333 0 0 1-21.333334-21.333334v-42.666666a21.333333 21.333333 0 0 1 21.333334-21.333334H469.333333V234.666667a21.333333 21.333333 0 0 1 21.333334-21.333334h42.666666a21.333333 21.333333 0 0 1 21.333334 21.333334V469.333333h234.666666a21.333333 21.333333 0 0 1 21.333334 21.333334z"
                     p-id="6406" fill="#ffffff"> 
                    </path>
                </svg></i>`;

  document.body.prepend(newSpan);

  newSpan.addEventListener("animationend", () => {
    newSpan.remove();
  });
};
```
