<!DOCTYPE html>
<html>
<title>MutationObserver</title>

<head>
    <title>MutationObserver</title>
</head>
<style>
    html,
    body {
        margin: 0 auto;
        padding: 0;
    }

    #div1 {
        width: 200px;
        height: fit-content;
        margin: 0 auto;
        background-color: orange;
    }
</style>

<body>
    <div id="div1" ondrag="drag(event)" draggable="true">Hello</div>
    <button onclick="add()">add</button>
    <script>
        var callback = function (mutations, observer) { console.log("ğŸš€ ~ mutations, observer:", mutations, observer) };


        var config = { attributes: true, childList: true, characterData: true };

        // åˆ›å»ºä¸€ä¸ªè§‚å¯Ÿè€…å®ä¾‹å¹¶ä¼ å…¥å›è°ƒå‡½æ•°
        var observer = new MutationObserver(callback);
        function drag(ev) {
            // console.log("ğŸš€ ~ drag ~ ev:", ev)
            ev.dataTransfer.setData("text", ev.target.id);
        }

        observer.observe(document.getElementById("div1"), config);

        function add() {
            // åˆ›å»ºä¸€ä¸ª <span> å…ƒç´ 
            var spanElement = document.createElement("p");

            // å¯é€‰ï¼šæ·»åŠ æ–‡æœ¬å†…å®¹
            spanElement.textContent = "è¿™æ˜¯ä¸€ä¸ª p å…ƒç´ ";

            // æ‰¾åˆ°è¦æ·»åŠ  <span> å…ƒç´ çš„çˆ¶å…ƒç´ ï¼Œå‡è®¾çˆ¶å…ƒç´ çš„ id ä¸º "container"
            var parentElement = document.getElementById("div1");

            // å°† <span> å…ƒç´ æ·»åŠ åˆ°çˆ¶å…ƒç´ ä¸­
            parentElement.appendChild(spanElement);
        }

        var resizeObserver = new ResizeObserver(function (entries) {
            console.log(entries);
        });
        resizeObserver.observe(document.getElementById("div1"));
    </script>
</body>

</html>