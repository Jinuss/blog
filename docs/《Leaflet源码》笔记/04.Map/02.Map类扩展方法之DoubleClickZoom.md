---
title: Map类扩展方法之DoubleClickZoom
date: 2025-04-07 17:20:14
permalink: /pages/9b01be/
categories:
  - 《Leaflet源码》笔记
  - Map
tags:
  -
author:
  name: 东流
  link: https://github.com/Jinuss
---

```js
Map.mergeOptions({
  doubleClickZoom: true,
});

export var DoubleClickZoom = Handler.extend({
  addHooks: function () {
    this._map.on("dblclick", this._onDoubleClick, this);
  },
  removeHooks: function () {
    this._map.off("dblclick", this._onDoubleClick, this);
  },
  _onDoubleClick: function (e) {
    var map = this._map,
      oldZoom = map.getZoom(),
      delta = map.options.zoomDelta,
      zoom = e.originalEvent.shiftKey ? oldZoom - delta : oldZoom + delta;

    if (map.options.doubleClickZoom === "center") {
      map.setZoom(zoom);
    } else {
      map.setZoomAround(e.containerPoint, zoom);
    }
  },
});

Map.addInitHook("addHandler", "doubleClickZoom", DoubleClickZoom);
```
