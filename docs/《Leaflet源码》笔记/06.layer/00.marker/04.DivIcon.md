---
title: DivIcon
date: 2025-04-11 14:07:18
permalink: /pages/a0085c/
categories:
  - ã€ŠLeafletæºç ã€‹ç¬”è®°
  - layer
  - marker
tags:
  -
author:
  name: ä¸œæµ
  link: https://github.com/Jinuss
---

## æ¦‚è¿°

`DivIcon`ç±»ç”¨äºåˆ›å»ºè‡ªå®šä¹‰çš„å›¾æ ‡å¯¹è±¡,å¯ä»¥ç”¨äºæ ‡è®°ç‚¹çš„å›¾æ ‡ã€‚`DivIcon`ç±»ç»§æ‰¿è‡ª`Icon`ç±»,æä¾›äº†ä¸€äº›æ–¹æ³•ç”¨äºåˆ›å»ºå›¾æ ‡å¯¹è±¡ã€‚

## æºç åˆ†æ

### æºç å®ç°

`DivIcon`ç±»æºç å®ç°å¦‚ä¸‹ï¼š

```js
export var DivIcon = Icon.extend({
  options: {
    iconSize: [12, 12], // å›¾æ ‡é»˜è®¤å¤§å°
    html: false, // è‡ªå®šä¹‰HTMLå†…å®¹ï¼ˆå­—ç¬¦ä¸²æˆ–DOMå…ƒç´ ï¼‰
    bgPos: null, // èƒŒæ™¯å›¾ä½ç½®åç§» å¦‚é›ªç¢§å›¾å®šä½
    className: "leaflet-div-icon", // é»˜è®¤CSSç±»
  },
  createIcon: function (oldIcon) {
    // å¤ç”¨æˆ–åˆ›å»ºæ–°çš„div å…ƒç´ 
    var div =
        oldIcon && oldIcon.tagName === "DIV"
          ? oldIcon
          : document.createElement("div"),
      options = this.options;
    
    // å¤„ç† HTML å†…å®¹
    if (options.html instanceof Element) {
      empty(div);
      div.appendChild(options.html); // æ’å…¥ DOM å…ƒç´ 
    } else {
      div.innerHTML = options.html !== false ? options.html : ""; // æ’å…¥å­—ç¬¦ä¸²æˆ–æ¸…ç©º
    }
    
    // è®¾ç½®èƒŒæ™¯ä½ç½®
    if (options.bgPos) {
      var bgPos = point(options.bgPos);
      div.style.backgroundPosition = -bgPos.x + "px " + -bgPos.y + "px";
    }
    // åº”ç”¨æ ·å¼ï¼ˆå¤§å°ã€å®šä½ç­‰ï¼‰
    this._setIconStyles(div, "icon");

    return div;
  },
  
  // è¦†ç›–çˆ¶ç±»æ–¹æ³•ï¼Œè¡¨ç¤º`DivIcon`çš„å®ä¾‹ä¸æ¸²æŸ“é˜´å½±
  createShadow: function () {
    return null;
  },
});

// å·¥å‚å‡½æ•°
export function divIcon(options) {
  return new DivIcon(options);
}
```

### ç¤ºä¾‹

ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹

```js
// åˆ›å»ºè‡ªå®šä¹‰å›¾æ ‡
var myIcon = L.divIcon({
  className: 'my-div-icon',
  html: '<span>ğŸš€</span>',
  bgPos: [10, 20]
});

// ä½œä¸ºæ ‡è®°çš„å›¾æ ‡
L.marker([50.505, 30.57], {icon: myIcon}).addTo(map);
```

## æ€»ç»“â€‹â€‹

`DivIcon` æä¾›äº†ä¸€ç§é«˜åº¦å¯å®šåˆ¶çš„æ–¹å¼ï¼Œç”¨ HTML/CSS æ›¿ä»£å›¾ç‰‡å®ç°åœ°å›¾æ ‡è®°å›¾æ ‡ï¼Œé€‚ç”¨äºéœ€è¦åŠ¨æ€å†…å®¹ã€åŠ¨ç”»æˆ–å¤æ‚æ ·å¼çš„åœºæ™¯ã€‚å…¶æ ¸å¿ƒæ˜¯é€šè¿‡æ“ä½œ DOM å…ƒç´ å’Œ CSS æ ·å¼æ¥å®ç°è½»é‡çº§æ¸²æŸ“ï¼ŒåŒæ—¶ç»§æ‰¿ Leaflet å›¾æ ‡çš„é€šç”¨åŠŸèƒ½ï¼ˆå¦‚å®šä½ã€å¼¹å‡ºæ¡†é”šç‚¹ç­‰ï¼‰ã€‚