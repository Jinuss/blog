(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{417:function(s,t,a){s.exports=a.p+"assets/img/DjangoWeb应用流程图.37b1fa4d.png"},560:function(s,t,a){"use strict";a.r(t);var n=a(4),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h3",{attrs:{id:"django-web-介绍"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#django-web-介绍"}},[s._v("#")]),s._v(" Django Web 介绍")]),s._v(" "),t("p",[t("code",[s._v("Django Web")]),s._v("是一个"),t("code",[s._v("Pyhton")]),s._v("高级 Web 框架，实际上 "),t("code",[s._v("Django")]),s._v(" 也可以做到前后端分离，即主要作为后端框架使用，不用模板渲染也是可行的。")]),s._v(" "),t("p",[t("code",[s._v("Django Web")]),s._v(" 应用的运行流程，如下图所示：")]),s._v(" "),t("img",{attrs:{src:a(417)}}),s._v(" "),t("p",[s._v("此外，"),t("code",[s._v("Django Web")]),s._v(" 在开发环境可以通过自带的服务器进行本地调试。但是该服务器不适用于生产环境，需要选择其它的 Web 服务器，如：")]),s._v(" "),t("p",[s._v("● "),t("strong",[s._v("Gunicorn")]),s._v("：一个轻量级的 "),t("strong",[s._v("WSGI HTTP")]),s._v(" 服务器。\n● "),t("strong",[s._v("uWSGI")]),s._v("：功能强大的 "),t("strong",[s._v("WSGI")]),s._v(" 服务器，适合高负载应用。\n● "),t("strong",[s._v("Daphne")]),s._v("：用于支持 "),t("code",[s._v("WebSocket")]),s._v(" 的应用")]),s._v(" "),t("h3",{attrs:{id:"django-web-前后端交互"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#django-web-前后端交互"}},[s._v("#")]),s._v(" Django Web 前后端交互")]),s._v(" "),t("p",[s._v("Django Web 的模板渲染在生成页面时，页面上的内容是静态的，如果涉及到用户交互，比如表单数据的保存以及表格搜索排序会涉及到前后端交互。在模板文件就中需要用到 js 去发送请求，这和一般前端页面的 api 操作别无二致。")]),s._v(" "),t("h4",{attrs:{id:"原生-django-web-中实现定义"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#原生-django-web-中实现定义"}},[s._v("#")]),s._v(" 原生 Django Web 中实现定义")]),s._v(" "),t("p",[s._v("Django Web 应用中，模板和 api 接口的定义一般都位于 urls.py，通过 path 去匹配路由：")]),s._v(" "),t("ul",[t("li",[s._v("api 接口路由定义")])]),s._v(" "),t("div",{staticClass:"language-py line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-py"}},[t("code",[t("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v('"""\nurls.py\n"""')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" django"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("urls "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" path\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" dvadmin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("system"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("views"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("user "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" UserViewSet "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# UserViewSet 是 dvadmin/system/views/user.py 中定义的 class 类，用于后端处理请求")]),s._v("\nurlpatterns "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\npath"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'user/export/'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" UserViewSet"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("as_view"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'post'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'export_data'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("ul",[t("li",[s._v("模板路由定义")])]),s._v(" "),t("div",{staticClass:"language-py line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-py"}},[t("code",[t("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v('"""\nurls.py\n"""')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" django"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("urls "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" path\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" django"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("shortcuts "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" render\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("web_view")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("request"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 视图层，可以单独在 views/[视图名称].py 中定义")]),s._v("\nconst context"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\nmessage"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hello World"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" render"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("request"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'web/index.html'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" context"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# render 的第二个参数可以静态文件或者 html 模板的路径，context 为模板渲染时用到的数据")]),s._v("\n\nurlpatterns "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\npath"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'web/'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" web_view"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'web_view'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("h4",{attrs:{id:"django-rest-framework-中实现接口定义"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#django-rest-framework-中实现接口定义"}},[s._v("#")]),s._v(" Django REST Framework 中实现接口定义")]),s._v(" "),t("p",[t("strong",[s._v("Django REST Framework")]),s._v("（即 DRF）是一个 Django 的扩展库，用于构建 Web APIs。它为 Django 提供了一系列工具和功能，使得开发 RESTful API 更加高效和便捷。")]),s._v(" "),t("p",[s._v("主要特点如下：")]),s._v(" "),t("ol",[t("li",[t("p",[t("strong",[s._v("序列化")]),s._v("：DRF 提供了强大的序列化工具，可以轻松地将复杂数据类型（如 Django 模型实例）转换为 JSON 或其他内容类型。")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("视图集")]),s._v("：DRF 提供了视图集和路由功能，可以简化 API 视图的创建和管理。")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("认证和权限")]),s._v("：DRF 内置多种认证机制（如 "),t("code",[s._v("Token")]),s._v("、"),t("code",[s._v("Session")]),s._v(" 等）和权限控制功能，方便管理用户访问。")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("浏览器可浏览的 API")]),s._v("："),t("code",[s._v("DRF")]),s._v(" 自动生成一个友好的 API 浏览器，方便开发和测试 API。")])])]),s._v(" "),t("p",[s._v("通过 DRF 定义接口地址，如下：")]),s._v(" "),t("div",{staticClass:"language-py line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-py"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" django"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("urls "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" path\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" rest_framework "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" routers\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" dvadmin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("system"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("views"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("menu "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" MenuViewSet "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 同上面的 UserViewSet 类一样，实现接口的类")]),s._v("\n\nsystem_url "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" routers"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("SimpleRouter"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#路由器类，用于自动生成 URL 路径。它会根据你注册的视图集自动创建标准的 RESTful API 路由。")]),s._v("\nsystem_url"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("register"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("r'menu'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" MenuViewSet"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#注册路由")]),s._v("\n\nurlpatterns "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),s._v(" system_url"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("urls\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])])])}),[],!1,null,null,null);t.default=e.exports}}]);